The code is explained in https://marian-caikovski.medium.com/accessing-secured-google-cloud-functions-from-the-browser-591b33bbd783